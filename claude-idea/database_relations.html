<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title {
        font-family: serif;
        font-size: 24px;
        font-weight: bold;
        fill: #2d5142;
      }
      .subtitle {
        font-family: sans-serif;
        font-size: 14px;
        fill: #666;
      }
      .table-box {
        fill: #ffffff;
        stroke: #3d6152;
        stroke-width: 2;
        rx: 8;
      }
      .table-header {
        fill: #3d6152;
      }
      .table-title {
        font-family: serif;
        font-size: 14px;
        font-weight: bold;
        fill: white;
      }
      .field-text {
        font-family: monospace;
        font-size: 11px;
        fill: #333;
      }
      .pk-field {
        font-family: monospace;
        font-size: 11px;
        fill: #c18856;
        font-weight: bold;
      }
      .fk-field {
        font-family: monospace;
        font-size: 11px;
        fill: #0ea5e9;
      }
      .relation-line {
        stroke: #666;
        stroke-width: 2;
        fill: none;
      }
      .relation-dot {
        fill: #c18856;
      }
      .section-label {
        font-family: sans-serif;
        font-size: 16px;
        font-weight: bold;
        fill: #8b7355;
      }
      .note-text {
        font-family: sans-serif;
        font-size: 10px;
        fill: #666;
      }
      .constraint-text {
        font-family: sans-serif;
        font-size: 9px;
        fill: #999;
      }
    </style>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="#FAF7F2" />

  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" class="title">
    EMC Yoga School ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆå›³
  </text>
  <text x="700" y="50" text-anchor="middle" class="subtitle">
    Supabase PostgreSQL - ãƒ†ãƒ¼ãƒ–ãƒ«é–¢ä¿‚ã¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
  </text>

  <!-- Section Labels -->
  <text x="100" y="90" class="section-label">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</text>
  <text x="500" y="90" class="section-label">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†</text>
  <text x="900" y="90" class="section-label">å­¦ç¿’é€²æ—</text>
  <text x="1200" y="90" class="section-label">ã‚·ã‚¹ãƒ†ãƒ </text>

  <!-- Users Table -->
  <g>
    <rect x="50" y="110" width="200" height="180" class="table-box" />
    <rect x="50" y="110" width="200" height="30" class="table-header" />
    <text x="150" y="130" text-anchor="middle" class="table-title">users</text>

    <text x="60" y="150" class="pk-field">id (UUID) PK</text>
    <text x="60" y="165" class="field-text">email (TEXT) UNIQUE</text>
    <text x="60" y="180" class="field-text">full_name (TEXT)</text>
    <text x="60" y="195" class="field-text">avatar_url (TEXT)</text>
    <text x="60" y="210" class="field-text">role (TEXT) DEFAULT 'student'</text>
    <text x="60" y="225" class="field-text">created_at (TIMESTAMP)</text>
    <text x="60" y="240" class="field-text">updated_at (TIMESTAMP)</text>

    <text x="60" y="265" class="constraint-text">â†’ Supabase Auth é€£æº</text>
    <text x="60" y="275" class="constraint-text">â†’ RLS Policy é©ç”¨</text>
  </g>

  <!-- Chapters Table -->
  <g>
    <rect x="350" y="110" width="200" height="150" class="table-box" />
    <rect x="350" y="110" width="200" height="30" class="table-header" />
    <text x="450" y="130" text-anchor="middle" class="table-title">
      chapters
    </text>

    <text x="360" y="150" class="pk-field">id (UUID) PK</text>
    <text x="360" y="165" class="field-text">title (TEXT) NOT NULL</text>
    <text x="360" y="180" class="field-text">description (TEXT)</text>
    <text x="360" y="195" class="field-text">order_num (INTEGER)</text>
    <text x="360" y="210" class="field-text">created_at (TIMESTAMP)</text>
    <text x="360" y="225" class="field-text">updated_at (TIMESTAMP)</text>

    <text x="360" y="245" class="constraint-text">â†’ é †åºç®¡ç†ã§ä¸¦ã³æ›¿ãˆ</text>
  </g>

  <!-- Lessons Table -->
  <g>
    <rect x="350" y="300" width="200" height="200" class="table-box" />
    <rect x="350" y="300" width="200" height="30" class="table-header" />
    <text x="450" y="320" text-anchor="middle" class="table-title">
      lessons
    </text>

    <text x="360" y="340" class="pk-field">id (UUID) PK</text>
    <text x="360" y="355" class="fk-field">chapter_id (UUID) FK</text>
    <text x="360" y="370" class="field-text">title (TEXT) NOT NULL</text>
    <text x="360" y="385" class="field-text">description (TEXT)</text>
    <text x="360" y="400" class="field-text">video_url (TEXT)</text>
    <text x="360" y="415" class="field-text">thumbnail_url (TEXT)</text>
    <text x="360" y="430" class="field-text">duration (TEXT)</text>
    <text x="360" y="445" class="field-text">order_num (INTEGER)</text>
    <text x="360" y="460" class="field-text">created_at (TIMESTAMP)</text>
    <text x="360" y="475" class="field-text">updated_at (TIMESTAMP)</text>

    <text x="360" y="490" class="constraint-text">â†’ YouTube URL æ ¼ç´</text>
  </g>

  <!-- Documents Table -->
  <g>
    <rect x="600" y="110" width="220" height="220" class="table-box" />
    <rect x="600" y="110" width="220" height="30" class="table-header" />
    <text x="710" y="130" text-anchor="middle" class="table-title">
      documents
    </text>

    <text x="610" y="150" class="pk-field">id (UUID) PK</text>
    <text x="610" y="165" class="field-text">title (TEXT) NOT NULL</text>
    <text x="610" y="180" class="field-text">description (TEXT)</text>
    <text x="610" y="195" class="field-text">file_url (TEXT) NOT NULL</text>
    <text x="610" y="210" class="fk-field">lesson_id (UUID) FK NULL</text>
    <text x="610" y="225" class="field-text">category (TEXT) NOT NULL</text>
    <text x="610" y="240" class="field-text">file_type (TEXT)</text>
    <text x="610" y="255" class="field-text">file_size (INTEGER)</text>
    <text x="610" y="270" class="field-text">created_at (TIMESTAMP)</text>
    <text x="610" y="285" class="field-text">updated_at (TIMESTAMP)</text>

    <text x="610" y="305" class="constraint-text">â†’ lesson_id NULLè¨±å¯</text>
    <text x="610" y="315" class="constraint-text">
      â†’ ä¸€èˆ¬è³‡æ–™ã¨ã—ã¦ç‹¬ç«‹å¯èƒ½
    </text>
  </g>

  <!-- Live Sessions Table -->
  <g>
    <rect x="600" y="370" width="220" height="180" class="table-box" />
    <rect x="600" y="370" width="220" height="30" class="table-header" />
    <text x="710" y="390" text-anchor="middle" class="table-title">
      live_sessions
    </text>

    <text x="610" y="410" class="pk-field">id (UUID) PK</text>
    <text x="610" y="425" class="field-text">title (TEXT) NOT NULL</text>
    <text x="610" y="440" class="field-text">description (TEXT)</text>
    <text x="610" y="455" class="field-text">video_url (TEXT)</text>
    <text x="610" y="470" class="field-text">thumbnail_url (TEXT)</text>
    <text x="610" y="485" class="field-text">scheduled_at (TIMESTAMP)</text>
    <text x="610" y="500" class="field-text">recorded_at (TIMESTAMP)</text>
    <text x="610" y="515" class="field-text">duration (TEXT)</text>
    <text x="610" y="530" class="field-text">created_at (TIMESTAMP)</text>

    <text x="610" y="545" class="constraint-text">
      â†’ ãƒ©ã‚¤ãƒ–ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ä¸¡å¯¾å¿œ
    </text>
  </g>

  <!-- User Progress Table -->
  <g>
    <rect x="900" y="110" width="220" height="220" class="table-box" />
    <rect x="900" y="110" width="220" height="30" class="table-header" />
    <text x="1010" y="130" text-anchor="middle" class="table-title">
      user_progress
    </text>

    <text x="910" y="150" class="pk-field">id (UUID) PK</text>
    <text x="910" y="165" class="fk-field">user_id (UUID) FK</text>
    <text x="910" y="180" class="fk-field">lesson_id (UUID) FK</text>
    <text x="910" y="195" class="field-text">progress_percent (INTEGER)</text>
    <text x="910" y="210" class="field-text">completed (BOOLEAN)</text>
    <text x="910" y="225" class="field-text">last_position (FLOAT)</text>
    <text x="910" y="240" class="field-text">completion_date (TIMESTAMP)</text>
    <text x="910" y="255" class="field-text">notes (TEXT)</text>
    <text x="910" y="270" class="field-text">created_at (TIMESTAMP)</text>
    <text x="910" y="285" class="field-text">updated_at (TIMESTAMP)</text>

    <text x="910" y="305" class="constraint-text">
      â†’ UNIQUE(user_id, lesson_id)
    </text>
    <text x="910" y="315" class="constraint-text">â†’ YouTube APIé€£æº</text>
  </g>

  <!-- Live Session Attendances Table -->
  <g>
    <rect x="900" y="370" width="220" height="180" class="table-box" />
    <rect x="900" y="370" width="220" height="30" class="table-header" />
    <text x="1010" y="390" text-anchor="middle" class="table-title">
      live_session_attendances
    </text>

    <text x="910" y="410" class="pk-field">id (UUID) PK</text>
    <text x="910" y="425" class="fk-field">user_id (UUID) FK</text>
    <text x="910" y="440" class="fk-field">live_session_id (UUID) FK</text>
    <text x="910" y="455" class="field-text">attended (BOOLEAN)</text>
    <text x="910" y="470" class="field-text">
      attendance_duration (INTEGER)
    </text>
    <text x="910" y="485" class="field-text">join_time (TIMESTAMP)</text>
    <text x="910" y="500" class="field-text">leave_time (TIMESTAMP)</text>
    <text x="910" y="515" class="field-text">created_at (TIMESTAMP)</text>

    <text x="910" y="535" class="constraint-text">
      â†’ UNIQUE(user_id, session_id)
    </text>
  </g>

  <!-- Document Views Table -->
  <g>
    <rect x="900" y="590" width="220" height="150" class="table-box" />
    <rect x="900" y="590" width="220" height="30" class="table-header" />
    <text x="1010" y="610" text-anchor="middle" class="table-title">
      document_views
    </text>

    <text x="910" y="630" class="pk-field">id (UUID) PK</text>
    <text x="910" y="645" class="fk-field">user_id (UUID) FK</text>
    <text x="910" y="660" class="fk-field">document_id (UUID) FK</text>
    <text x="910" y="675" class="field-text">viewed (BOOLEAN)</text>
    <text x="910" y="690" class="field-text">view_duration (INTEGER)</text>
    <text x="910" y="705" class="field-text">viewed_at (TIMESTAMP)</text>
    <text x="910" y="720" class="field-text">created_at (TIMESTAMP)</text>

    <text x="910" y="735" class="constraint-text">
      â†’ UNIQUE(user_id, document_id)
    </text>
  </g>

  <!-- Announcements Table -->
  <g>
    <rect x="1150" y="110" width="200" height="180" class="table-box" />
    <rect x="1150" y="110" width="200" height="30" class="table-header" />
    <text x="1250" y="130" text-anchor="middle" class="table-title">
      announcements
    </text>

    <text x="1160" y="150" class="pk-field">id (UUID) PK</text>
    <text x="1160" y="165" class="field-text">title (TEXT) NOT NULL</text>
    <text x="1160" y="180" class="field-text">content (TEXT) NOT NULL</text>
    <text x="1160" y="195" class="field-text">is_important (BOOLEAN)</text>
    <text x="1160" y="210" class="field-text">published_at (TIMESTAMP)</text>
    <text x="1160" y="225" class="field-text">created_at (TIMESTAMP)</text>
    <text x="1160" y="240" class="field-text">updated_at (TIMESTAMP)</text>

    <text x="1160" y="265" class="constraint-text">â†’ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥å¯¾å¿œ</text>
    <text x="1160" y="275" class="constraint-text">
      â†’ é‡è¦åº¦åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    </text>
  </g>

  <!-- Relationships -->
  <!-- chapters -> lessons -->
  <line x1="450" y1="260" x2="450" y2="300" class="relation-line" />
  <circle cx="450" cy="260" r="3" class="relation-dot" />
  <circle cx="450" cy="300" r="3" class="relation-dot" />
  <text x="465" y="280" class="note-text">1:N</text>

  <!-- lessons -> documents -->
  <line x1="550" y1="400" x2="600" y2="300" class="relation-line" />
  <circle cx="550" cy="400" r="3" class="relation-dot" />
  <circle cx="600" cy="300" r="3" class="relation-dot" />
  <text x="570" y="350" class="note-text">1:N (optional)</text>

  <!-- users -> user_progress -->
  <line x1="250" y1="200" x2="900" y2="220" class="relation-line" />
  <circle cx="250" cy="200" r="3" class="relation-dot" />
  <circle cx="900" cy="220" r="3" class="relation-dot" />
  <text x="575" y="195" class="note-text">1:N</text>

  <!-- lessons -> user_progress -->
  <line x1="550" y1="350" x2="900" y2="270" class="relation-line" />
  <circle cx="550" cy="350" r="3" class="relation-dot" />
  <circle cx="900" cy="270" r="3" class="relation-dot" />
  <text x="725" y="310" class="note-text">1:N</text>

  <!-- users -> live_session_attendances -->
  <line x1="250" y1="250" x2="900" y2="430" class="relation-line" />
  <circle cx="250" cy="250" r="3" class="relation-dot" />
  <circle cx="900" cy="430" r="3" class="relation-dot" />
  <text x="575" y="340" class="note-text">1:N</text>

  <!-- live_sessions -> live_session_attendances -->
  <line x1="820" y1="460" x2="900" y2="460" class="relation-line" />
  <circle cx="820" cy="460" r="3" class="relation-dot" />
  <circle cx="900" cy="460" r="3" class="relation-dot" />
  <text x="850" y="455" class="note-text">1:N</text>

  <!-- users -> document_views -->
  <line x1="250" y1="270" x2="900" y2="650" class="relation-line" />
  <circle cx="250" cy="270" r="3" class="relation-dot" />
  <circle cx="900" cy="650" r="3" class="relation-dot" />
  <text x="575" y="460" class="note-text">1:N</text>

  <!-- documents -> document_views -->
  <line x1="820" y1="250" x2="900" y2="650" class="relation-line" />
  <circle cx="820" cy="250" r="3" class="relation-dot" />
  <circle cx="900" cy="650" r="3" class="relation-dot" />
  <text x="850" y="450" class="note-text">1:N</text>

  <!-- Key Features Box -->
  <rect
    x="50"
    y="800"
    width="300"
    height="150"
    fill="white"
    stroke="#3D6152"
    stroke-width="2"
    rx="8"
  />
  <text x="60" y="825" class="section-label">ä¸»è¦ãªåˆ¶ç´„ãƒ»æ©Ÿèƒ½</text>

  <text x="60" y="845" class="field-text">ğŸ”’ Row Level Security (RLS)</text>
  <text x="70" y="860" class="note-text">
    â€¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹
  </text>
  <text x="70" y="875" class="note-text">â€¢ ç®¡ç†è€…ã¯å…¨ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</text>

  <text x="60" y="895" class="field-text">ğŸ”„ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°</text>
  <text x="70" y="910" class="note-text">â€¢ ãŠçŸ¥ã‚‰ã›ã®å³åº§åæ˜ </text>
  <text x="70" y="925" class="note-text">â€¢ é€²æ—ãƒ‡ãƒ¼ã‚¿ã®åŒæœŸ</text>

  <text x="60" y="940" class="field-text">ğŸ“Š è¤‡åˆåˆ¶ç´„</text>
  <text x="70" y="955" class="note-text">â€¢ UNIQUEåˆ¶ç´„ã§é‡è¤‡é˜²æ­¢</text>

  <!-- Data Types Legend -->
  <rect
    x="400"
    y="800"
    width="300"
    height="150"
    fill="white"
    stroke="#3D6152"
    stroke-width="2"
    rx="8"
  />
  <text x="410" y="825" class="section-label">ãƒ‡ãƒ¼ã‚¿å‹ã¨åˆ¶ç´„</text>

  <text x="410" y="845" class="pk-field">PK: Primary Key (UUID)</text>
  <text x="410" y="860" class="fk-field">FK: Foreign Key (UUID)</text>
  <text x="410" y="875" class="field-text">TEXT: å¯å¤‰é•·æ–‡å­—åˆ—</text>
  <text x="410" y="890" class="field-text">INTEGER: æ•´æ•°</text>
  <text x="410" y="905" class="field-text">BOOLEAN: çœŸå½å€¤</text>
  <text x="410" y="920" class="field-text">TIMESTAMP: æ—¥æ™‚ï¼ˆUTCï¼‰</text>
  <text x="410" y="935" class="field-text">FLOAT: æµ®å‹•å°æ•°ç‚¹æ•°</text>

  <!-- Performance Notes -->
  <rect
    x="750"
    y="800"
    width="300"
    height="150"
    fill="white"
    stroke="#3D6152"
    stroke-width="2"
    rx="8"
  />
  <text x="760" y="825" class="section-label">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</text>

  <text x="760" y="845" class="field-text">ğŸ“ˆ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ</text>
  <text x="770" y="860" class="note-text">â€¢ å¤–éƒ¨ã‚­ãƒ¼è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</text>
  <text x="770" y="875" class="note-text">â€¢ æ¤œç´¢é »åº¦ã®é«˜ã„ã‚«ãƒ©ãƒ </text>

  <text x="760" y="895" class="field-text">ğŸ” ã‚¯ã‚¨ãƒªæœ€é©åŒ–</text>
  <text x="770" y="910" class="note-text">â€¢ JOINæ“ä½œã®åŠ¹ç‡åŒ–</text>
  <text x="770" y="925" class="note-text">â€¢ é€²æ—ãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆæœ€é©åŒ–</text>

  <text x="760" y="945" class="field-text">ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ç®¡ç†</text>
  <text x="770" y="960" class="note-text">â€¢ è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆSupabaseï¼‰</text>

  <!-- Technical Notes -->
  <rect
    x="1100"
    y="800"
    width="250"
    height="150"
    fill="white"
    stroke="#3D6152"
    stroke-width="2"
    rx="8"
  />
  <text x="1110" y="825" class="section-label">æŠ€è¡“ä»•æ§˜</text>

  <text x="1110" y="845" class="field-text">ğŸ—„ï¸ Database: PostgreSQL</text>
  <text x="1110" y="860" class="field-text">â˜ï¸ Platform: Supabase</text>
  <text x="1110" y="875" class="field-text">ğŸ” Auth: Supabase Auth</text>
  <text x="1110" y="890" class="field-text">ğŸ“¡ API: REST + Realtime</text>
  <text x="1110" y="905" class="field-text">ğŸ¥ Video: YouTube API</text>
  <text x="1110" y="920" class="field-text">ğŸ“ Storage: Supabase Storage</text>
  <text x="1110" y="935" class="field-text">ğŸŒ CDN: è‡ªå‹•é…ä¿¡æœ€é©åŒ–</text>
</svg>
